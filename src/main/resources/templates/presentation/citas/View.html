<!DOCTYPE html>
<html lang="es" xmlns:th="http://www.thymeleaf.org">
<head th:replace="presentation/fragments/fragments :: head">
  <link rel="stylesheet" href="/css/global.css">
  <link rel="stylesheet" href="/css/autentificacion.css">
  <title>Patient - appointments</title>
</head>
<body>
<header th:replace="presentation/fragments/fragments :: header"></header>


<div class="container">

  <h1 class="patient-header">
    Patient - <span class="patient-name" th:text="${nombrePaciente}">Bruce Banner</span> - appointments
  </h1>


  <div class="search-section">
    <form th:action="@{/presentation/citas/search}" method="post" class="search-form">
      <div class="search-field">
        <select class="form-control" name="estado">
          <option value="">All</option>
          <option value="Pending">Pending</option>
          <option value="Attended">Attended</option>
          <option value="Cancelled">Cancelled</option>
        </select>
      </div>
      <div class="search-field">
        <select class="form-control" name="orden">
          <option value="">All</option>
          <option value="asc">Más reciente</option>
          <option value="desc">Menos reciente</option>
        </select>
      </div>
      <div class="search-field">
        <input type="text" class="form-control" name="filtroPaciente" placeholder="Paciente">
      </div>
      <button type="submit" class="btn-search">Search</button>
    </form>
  </div>


  <div class="appointment-list">

    <div th:each="cita : ${citasList}" class="appointment-card">

      <div class="doctor-column">

        <img th:src="@{${cita.medico.foto}}" alt="Doctor" class="doctor-avatar">
        <div class="doctor-details">
          <div class="doctor-name">

            <b th:text="${cita.medico.nombre}">George Lucas</b>

            <span class="doctor-cost" th:text="${cita.medico.costoConsulta}">₡70,000</span>
          </div>
          <div class="doctor-specialty" th:text="${cita.medico.especialidad}">Neurology</div>
          <div class="doctor-location">
            <span th:text="${cita.medico.hospital}">Brain Center</span>
            <span class="at-symbol">@</span>
            <span th:text="${cita.medico.ciudad}">Cartago</span>
          </div>
        </div>
      </div>


      <div class="appointment-date-column">
        <span class="appointment-date"
              th:text="${#temporals.format(cita.fecha, 'dd/MM/yyyy - HH:mm')}">
          19/02/2025 - 15:00
        </span>
      </div>


      <div class="appointment-status-column">
        <div class="appointment-status"
             th:classappend="${cita.estado == 'Pending'} ? ' pending'
                             : (cita.estado == 'Attended' ? ' attended' : ' cancelled')"
             th:text="${cita.estado}">
          Pending
        </div>
      </div>


      <div class="view-button-column">

        <a th:href="@{/presentation/citas/cancel/{id}(id=${cita.id})}" class="btn-view">
          <i class="fa-solid fa-ban"></i> Cancel
        </a>
      </div>
    </div>

    <div th:if="${#lists.isEmpty(citasList)}">
      <p>No se encontraron citas.</p>
    </div>
  </div>
</div>

<footer th:replace="presentation/fragments/fragments :: footer"></footer>
</body>
</html>
